{"version":3,"sources":["frontend/base/default/ebanx/js/checkout.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","cardCvv"],"mappings":"cAAA,SAAUA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAkB,mBAATC,SAAqBA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,MAAM,IAAIK,MAAM,uBAAuBL,EAAE,KAAK,IAAIM,EAAET,EAAEG,IAAIO,YAAYX,EAAEI,GAAG,GAAGQ,KAAKF,EAAEC,QAAQ,SAASZ,GAAG,IAAIE,EAAED,EAAEI,GAAG,GAAGL,GAAG,OAAOI,EAAEF,GAAIF,IAAIW,EAAEA,EAAEC,QAAQZ,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGO,QAAkD,IAA1C,IAAIH,EAAkB,mBAATD,SAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAArZ,EAA0ZW,GAAG,SAASP,EAAQQ,EAAOJ,cAsFjbK","file":"checkout.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nfunction handleEbanxForm(countryCode, paymentType) {\n  var getById = function (element) {\n    return document.getElementById(element);\n  };\n  var responseData = null;\n\n  var cardName = getById('ebanx_' + paymentType + '_' + countryCode + '_' + paymentType + '_name');\n  var cardNumber = getById('ebanx_' + paymentType + '_' + countryCode + '_' + paymentType + '_number');\n  var cardExpirationMonth = getById('ebanx_' + paymentType + '_' + countryCode + '_expiration');\n  var cardExpirationYear = getById('ebanx_' + paymentType + '_' + countryCode + '_expiration_yr');\n  var cardCvv = getById('ebanx_' + paymentType + '_' + countryCode + '_' + paymentType + '_cid');\n  var ebanxToken = getById('ebanx_' + paymentType + '_' + countryCode + '_token');\n  var ebanxBrand = getById('ebanx_' + paymentType + '_' + countryCode + '_brand');\n  var ebanxMaskedCardNumber = getById('ebanx_' + paymentType + '_' + countryCode + '_masked_card_number');\n  var ebanxDeviceFingerprint = getById('ebanx_' + paymentType + '_' + countryCode + '_device_fingerprint');\n  var ebanxMode = getById('ebanx_' + paymentType + '_' + countryCode + '_mode');\n  var ebanxIntegrationKey = getById('ebanx_' + paymentType + '_' + countryCode + '_integration_key');\n  var ebanxCountry = getById('ebanx_' + paymentType + '_' + countryCode + '_country');\n\n  var hasEbanxForm = typeof getById('payment_form_ebanx_' + paymentType + '_' + countryCode) !== 'undefined';\n\n  var mode = ebanxMode.value === 'sandbox' ? 'test' : 'production';\n  EBANX.config.setMode(mode);\n  EBANX.config.setPublishableKey(ebanxIntegrationKey.value);\n  EBANX.config.setCountry(ebanxCountry.value);\n\n  var handleToken = function () {\n    if (!isFormEmpty()) {\n      generateToken();\n    }\n  };\n\n  var isFormEmpty = function () {\n    return !cardNumber.value.length ||\n      !cardName.value.length ||\n      !cardExpirationMonth.value.length ||\n      !cardExpirationYear.value.length ||\n      !cardCvv.value.length;\n  };\n\n  var generateToken = function () {\n    if (!responseData) {\n      var placeOrderButton = document.querySelector('#review-buttons-container > button');\n      if (typeof placeOrderButton !== 'undefined' && placeOrderButton) {\n        placeOrderButton.disabled = true;\n      }\n\n      EBANX.card.createToken({\n        card_number: parseInt(cardNumber.value.replace(/ /g, '')),\n        card_name: cardName.value,\n        card_due_date: (parseInt(cardExpirationMonth.value) || 0) + '/' + (parseInt(cardExpirationYear.value) || 0),\n        card_cvv: cardCvv.value\n      }, saveToken);\n    }\n  };\n\n  var saveToken = function (response) {\n    if (response.data.hasOwnProperty('status')) {\n      responseData = response.data;\n      ebanxToken.value = responseData.token;\n      ebanxBrand.value = responseData.payment_type_code;\n      ebanxMaskedCardNumber.value = responseData.masked_card_number;\n      ebanxDeviceFingerprint.value = responseData.deviceId;\n\n      var placeOrderButton = document.querySelector('#review-buttons-container > button');\n      if (typeof placeOrderButton !== 'undefined' && placeOrderButton) {\n        placeOrderButton.disabled = false;\n      }\n      return;\n    }\n  };\n\n  var clearResponseData = function () {\n    responseData = null;\n    ebanxToken.value = '';\n    ebanxBrand.value = '';\n    ebanxMaskedCardNumber.value = '';\n    ebanxDeviceFingerprint.value = '';\n  };\n\n  if (hasEbanxForm) {\n    cardName.addEventListener('blur', handleToken, false);\n    cardNumber.addEventListener('blur', handleToken, false);\n    cardExpirationMonth.addEventListener('blur', handleToken, false);\n    cardExpirationYear.addEventListener('blur', handleToken, false);\n    cardCvv.addEventListener('blur', handleToken, false);\n\n    cardName.addEventListener('change', clearResponseData, false);\n    cardNumber.addEventListener('change', clearResponseData, false);\n    cardExpirationMonth.addEventListener('change', clearResponseData, false);\n    cardExpirationYear.addEventListener('change', clearResponseData, false);\n    cardCvv.addEventListener('change', clearResponseData, false);\n  }\n}\n\n},{}]},{},[1])"]}