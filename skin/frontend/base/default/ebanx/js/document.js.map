{"version":3,"sources":["frontend/base/default/ebanx/js/document.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","defaultLabel","taxVatLabel","taxVatInput","qs","el","document","changeTaxVatLabel","country","getLabelByCountry","newLabel","toLowerCase","EBANXData","brazilAllowedDocumentFields","join","toUpperCase","inputHandler","v","VMasker","OSCRequire","setTimeout","placeholder","innerHTML","unMask","taxVatMask","maskPattern","max","event","target","value","replace","m","c","masks","toPattern","bind","undefined","ebanxRemoveOSCRequireDocument","addEventListener","maskTaxVat","getElementById","amsCheckoutHandler","countrySelect","dispatchEvent","Event"],"mappings":"cAAA,SAAUA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAkB,mBAATC,SAAqBA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,MAAM,IAAIK,MAAM,uBAAuBL,EAAE,KAAK,IAAIM,EAAET,EAAEG,IAAIO,YAAYX,EAAEI,GAAG,GAAGQ,KAAKF,EAAEC,QAAQ,SAASZ,GAAG,IAAIE,EAAED,EAAEI,GAAG,GAAGL,GAAG,OAAOI,EAAEF,GAAIF,IAAIW,EAAEA,EAAEC,QAAQZ,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGO,QAAkD,IAA1C,IAAIH,EAAkB,mBAATD,SAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAArZ,EAA0ZW,GAAG,SAASP,EAAQQ,EAAOJ,GAAla,IAAAK,EAAgBC,EAAUC,EAA8IC,EAAA,SAAMC,GAAqD,OAAAC,SAAQjB,cAASgB,IAoBvQ,IAaIE,EAAoB,WAbxB,IAAAC,EAAIC,KAAAA,MACFC,EADsB,SAAUF,EAASP,GAb3C,OAAIG,EAAKO,eACP,IAAA,KADF,OAAAC,UAAAC,4BAAAC,KAAA,OAAAC,cAiBI,IAAK,KAbT,MAASC,MACP,IAAA,KACA,MAAIC,MACJ,QACAC,OAAAA,GAMQV,CAARA,EAAAP,GAaA,GAXIkB,EAAAX,GAEAY,WAAA,WAAAjB,EAAAkB,YAAA,IAAA,IAEAnB,EAAAoB,UAAAZ,EACF,OAAAF,GAAA,OAAAA,GAAA,OAAAA,GACEY,WAAOnB,WAAAA,EAAPoB,YAAAX,GAAA,IAiBJQ,QAAQf,GAAaoB,SAZjBf,OAAJA,EAAc,CACd,IAAAgB,GAA0CvB,IAA3BQ,EAAAA,QAAAA,SAA2BR,iBAA1C,uBAAA,iBAAA,kBAeEiB,QAAQf,GAAasB,YAAYD,EAAW,IAb9CL,EAAAA,iBAAA,QArC+T,SAAa3B,EAASkC,EAAAC,GAA+CvC,IAAED,EAAFwC,EAAAC,OAAQX,EAAO7B,EAAPyC,MAAAC,QAAA,MAAA,IAAYC,EAAGC,EAAAH,MAAA/B,OAAA4B,EAAiB1B,EAAOJ,EACrbsB,QAAAc,GAAAT,SAeEL,QAAQc,GAAGP,YAAYQ,EAAMF,IAb/BC,EAAAH,MAAI5B,QAAJiC,UAAAjB,EAAAgB,EAAAF,KAkCEI,UAAAC,EAAAZ,EAAA,KAAA,KAqBCL,EAAA,SAAAX,GAmB4C,oBAAlC6B,+BAjBXA,8BAAuB7B,IAIvBF,SAAAgC,iBAAoB,mBAzBpB,WAiBA,GAAK1B,UAAU2B,WAAf,CAb0BpC,IAAAA,EAAYkB,EAAAA,yBAAwBnB,EAA1DE,EAAA,iCACHD,EAAAG,SAAAkC,eAAA,kBAEDtB,GAAA,mBAAqBK,qBAmBnBrB,EAAcuC,sBAfdvB,GAAQf,GAAasB,IACrBtB,EAAAA,EAAYmC,UAEfI,EApBDJ,iBAAA,SAAA/B,GAuCImC,EAAcC,cAAc,IAAIC,MAAM,yBANvC","file":"document.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar defaultLabel;\nvar taxVatLabel;\nvar taxVatInput;\n\nvar qs = function (el) {\n  return document.querySelector(el);\n};\n\nfunction inputHandler(masks, max, event) {\n  var c = event.target;\n  var v = c.value.replace(/\\D/g, '');\n  var m = c.value.length > max ? 1 : 0;\n  VMasker(c).unMask();\n  VMasker(c).maskPattern(masks[m]);\n  c.value = VMasker.toPattern(v, masks[m]);\n}\n\nvar getLabelByCountry = function (country, defaultLabel) {\n  switch (country.toLowerCase()) {\n    case 'br':\n      return EBANXData.brazilAllowedDocumentFields.join(' / ').toUpperCase();\n    case 'co':\n      return 'DNI';\n    case 'cl':\n      return 'RUT';\n    default:\n      return defaultLabel;\n  }\n};\n\nvar changeTaxVatLabel = function () {\n  var country = this.value;\n  var newLabel = getLabelByCountry(country, defaultLabel);\n\n  OSCRequire(country);\n\n  setTimeout(function(){taxVatInput.placeholder = '';}, 10);\n\n  taxVatLabel.innerHTML = newLabel;\n  if(country === 'BR' || country === 'CO' || country === 'CL') {\n      setTimeout(function(){taxVatInput.placeholder = newLabel;}, 10)\n  }\n\n  VMasker(taxVatInput).unMask();\n\n  if (country === 'BR') {\n    var taxVatMask = newLabel.indexOf('CNPJ') !== -1 ? ['999.999.999-99', '99.999.999/9999-99'] : ['999.999.999-99', '999.999.999-99'];\n    VMasker(taxVatInput).maskPattern(taxVatMask[0]);\n    taxVatInput.addEventListener('input', inputHandler.bind(undefined, taxVatMask, 14), false);\n  }\n};\n\nvar init = function () {\n  if (!EBANXData.maskTaxVat) {\n    return;\n  }\n\n  var countrySelect = qs('#billing\\\\:country_id');\n  taxVatLabel = qs('label[for=\"billing\\\\:taxvat\"]');\n  taxVatInput = document.getElementById('billing:taxvat');\n\n  if (!taxVatLabel && typeof amsCheckoutHandler === 'function') {\n    taxVatLabel = amsCheckoutHandler();\n  }\n\n  if (taxVatLabel && countrySelect && taxVatInput) {\n    defaultLabel = taxVatLabel.innerHTML;\n\n    countrySelect.addEventListener('change', changeTaxVatLabel);\n    countrySelect.dispatchEvent(new Event('change'));\n  }\n};\n\nvar OSCRequire = function (country) {\n  if (typeof ebanxRemoveOSCRequireDocument !== 'undefined') {\n    ebanxRemoveOSCRequireDocument(country);\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', init);\n\n},{}]},{},[1])"]}