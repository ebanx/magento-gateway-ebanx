{"version":3,"sources":["frontend/base/default/ebanx/js/document.js"],"names":["defaultLabel","taxVatLabel","document","querySelector","getElementById","countrySelect","country","toLowerCase","getLabelByCountry","join","toUpperCase","EBANXData","OSCRequire","ebanxRemoveOSCRequireDocument","changeTaxVatLabel","undefined","value","newLabel","setTimeout","placeholder","taxVatInput","inputHandler","init","dispatchEvent","Event","innerHTML","addEventListener"],"mappings":"aAGA,IAAAA,aAAA,KAGIC,YAAaC,SAASC,cAAc,iCADpCH,YAAeE,SAAnBE,eAAA,kBACIH,cAAaC,SAASC,cAAc,yBAElCE,kBAAgBH,SAAAA,EAASC,GAG7B,OAAQG,EAAQC,eADZC,IAAAA,KACJ,OAAQF,UAAQC,4BAAhBE,KAAA,OAAAC,cACE,IAAK,KACH,MAAOC,MACT,IAAK,KACH,MAAO,MACT,QACE,OAAOX,IAPbY,WAAA,SAAAN,GAc+C,oBAAlCO,+BADPD,8BAAAA,IAANE,kBAAA,WAOE,IAAMR,QAAUS,GAAKC,MADjBF,EAAAA,kBAAAA,EAAAA,cAEJF,WAAMK,GAENL,WAGE,WADFM,YACEC,YAAW,IADb,IAQAlB,YAAIK,UAAoBA,EAEpB,OADFY,GACQ,OAANZ,GAAM,OAAAA,GACJc,WAFJ,WAMDA,YAAAD,YAAAF,GAEDI,IAIAA,aAAKV,YAALL,IADIgB,KAAO,WAKNrB,UAAAA,aAIDA,aAA6C,mBAA9BI,qBACjBL,YAAAA,sBAGAK,aAAckB,eAAkBC,cACjCxB,aAAAC,YAAAwB,UAFCpB,cAAcqB,iBAAiB,SAAUZ,mBAK7CZ,cAASwB,cAAiB,IAAAF,MAAA,cAA1BtB,SAASwB,iBAAiB,mBAAoBJ","file":"document.js","sourcesContent":["/* global EBANXData */\n/* global amsCheckoutHandler */\n/* global ebanxRemoveOSCRequireDocument */\n/* global inputHandler */\n\nlet defaultLabel = null;\nlet taxVatLabel= document.querySelector('label[for=\"billing\\\\:taxvat\"]');\nconst taxVatInput = document.getElementById('billing:taxvat');\nconst countrySelect = document.querySelector('#billing\\\\:country_id');\n\nconst getLabelByCountry = (country, defaultLabel) => {\n  switch (country.toLowerCase()) {\n    case 'br':\n      return EBANXData.brazilAllowedDocumentFields.join(' / ').toUpperCase();\n    case 'co':\n      return 'DNI';\n    case 'cl':\n      return 'RUT';\n    default:\n      return defaultLabel;\n  }\n};\n\nconst OSCRequire = country => {\n  if (typeof ebanxRemoveOSCRequireDocument !== 'undefined') {\n    ebanxRemoveOSCRequireDocument(country);\n  }\n};\n\nconst changeTaxVatLabel = () => {\n  const country = this.value;\n  const newLabel = getLabelByCountry(country, defaultLabel);\n\n  OSCRequire(country);\n\n  setTimeout(\n    function() {\n      taxVatInput.placeholder = '';\n    },\n    10\n  );\n\n  taxVatLabel.innerHTML = newLabel;\n  if (country === 'BR' || country === 'CO' || country === 'CL') {\n    setTimeout(\n      () => {\n        taxVatInput.placeholder = newLabel;\n      },\n      10\n    );\n  }\n\n  inputHandler(taxVatInput, country);\n};\n\nconst init = () => {\n  if (!EBANXData.maskTaxVat) {\n    return;\n  }\n\n  if (!taxVatLabel && typeof amsCheckoutHandler === 'function') {\n    taxVatLabel = amsCheckoutHandler();\n  }\n\n  if (taxVatLabel && countrySelect && taxVatInput) {\n    defaultLabel = taxVatLabel.innerHTML;\n\n    countrySelect.addEventListener('change', changeTaxVatLabel);\n    countrySelect.dispatchEvent(new Event('change'));\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', init);\n"]}