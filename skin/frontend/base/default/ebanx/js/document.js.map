{"version":3,"sources":["frontend/base/default/ebanx/js/document.js"],"names":["defaultLabel","taxVatLabel","countrySelect","country","toLowerCase","getLabelByCountry","join","toUpperCase","EBANXData","OSCRequire","ebanxRemoveOSCRequireDocument","changeTaxVatLabel","value","newLabel","setTimeout","placeholder","taxVatInput","inputHandler","addDocumentTypeField","createElement","div","document","getElementById","ul","insertBefore","closest","className","innerHTML","amsCheckoutHandler","addEventListener","dispatchEvent","Event","init"],"mappings":"aAGA,IAAAA,aAAA,KAGIC,YAAc,KADdD,YAAAA,KACAC,cAAc,KAEdC,kBAAJ,SAAAC,EAAAH,GAGE,OAAQG,EAAQC,eADZC,IAAAA,KACJ,OAAQF,UAAQC,4BAAhBE,KAAA,OAAAC,cACE,IAAK,KACH,MAAOC,MACT,IAAK,KACH,MAAO,MACT,QACE,OAAOR,IAPbS,WAAA,SAAAN,GAc+C,oBAAlCO,+BADPD,8BAAAA,IAANE,kBAAA,WAOE,IAAMR,EAAUD,cAAcU,MAD1BD,EAAAA,kBAAAA,EAAAA,cAEJF,WAAMI,GAENJ,WAGE,WADFK,YACEC,YAAW,IADb,IAQAd,YAAIE,UAAoBA,EAEpB,OADFW,GACQ,OAANX,GAAM,OAAAA,GACJa,WAFJ,WAMDA,YAAAD,YAAAF,GAEDI,IAIAA,aAAIf,YAAAC,IADAe,qBAAuB,WAK3B,GAAqBC,OAAfC,cAAMC,QAAuBA,SAAnCC,eAAA,+BAAA,CAeAC,IAAGC,EAAAA,SAAkBR,cAAYS,MApBnCL,EAAAM,UAAA,SAOEN,EAAIO,UAAJ,+fA2BK1B,YAAewB,QAAOG,MACzB3B,aAAc2B,EAAAA,YAAAA,QAAd,SAGE1B,KAAAA,WACFF,YAAAA,SAAeC,cAAY0B,iCAd7BX,YAAcK,SAASC,eAAe,kBAgBpCpB,cAAc2B,SAAAA,cAAiB,0BAE/B3B,UAAAA,YAA4BD,aAAUe,aAAtC,OAAAA,eAIJK,uBAbOpB,aAA6C,mBAAvB2B,qBACzB3B,YAAc2B,sBAGZ1B,gBACFF,aAAeC,YAAY0B,UAE3BzB,cAAc2B,iBAAiB,SAAUlB,mBACzCT,cAAc2B,iBAAiB,SAAUX,sBACzChB,cAAc4B,cAAc,IAAIC,MAAM,cAI1CV,SAASQ,iBAAiB,mBAAoBG","file":"document.js","sourcesContent":["/* global EBANXData */\n/* global amsCheckoutHandler */\n/* global ebanxRemoveOSCRequireDocument */\n/* global inputHandler */\n\nlet defaultLabel = null;\nlet taxVatLabel = null;\nlet taxVatInput = null;\nlet countrySelect = null;\n\nconst getLabelByCountry = (country, defaultLabel) => {\n  switch (country.toLowerCase()) {\n    case 'br':\n      return EBANXData.brazilAllowedDocumentFields.join(' / ').toUpperCase();\n    case 'co':\n      return 'DNI';\n    case 'cl':\n      return 'RUT';\n    default:\n      return defaultLabel;\n  }\n};\n\nconst OSCRequire = country => {\n  if (typeof ebanxRemoveOSCRequireDocument !== 'undefined') {\n    ebanxRemoveOSCRequireDocument(country);\n  }\n};\n\nconst changeTaxVatLabel = () => {\n  const country = countrySelect.value;\n  const newLabel = getLabelByCountry(country, defaultLabel);\n\n  OSCRequire(country);\n\n  setTimeout(\n    function() {\n      taxVatInput.placeholder = '';\n    },\n    10\n  );\n\n  taxVatLabel.innerHTML = newLabel;\n  if (country === 'BR' || country === 'CO' || country === 'CL') {\n    setTimeout(\n      () => {\n        taxVatInput.placeholder = newLabel;\n      },\n      10\n    );\n  }\n\n  inputHandler(taxVatInput, country);\n};\n\nconst addDocumentTypeField = () => {\n  if (countrySelect.value !== 'AR' || document.getElementById('billing:ebanx_document_type')) {\n    return;\n  }\n\n  const div = document.createElement('li');\n  div.className = 'fields';\n  div.innerHTML = `<div class=\"field\">\n      <label for=\"billing:ebanx_document_type\" class=\"required\">\n          Document Type\n      </label>\n      <div class=\"input-box\">\n          <select name=\"billing[ebanx_document_type]\" id=\"billing:ebanx_document_type\" title=\"Document Type\" class=\"validate-select required-entry\">\n            <option value=\"ARG_CUIT\">CUIT</option>\n            <option value=\"ARG_CUIL\">CUIL</option>\n            <option value=\"ARG_CDI\">CDI</option>\n          </select>\n      </div>\n    </div>`;\n  const ul = taxVatInput.closest('ul');\n  ul.insertBefore(div, taxVatInput.closest('li'));\n};\n\nconst init = () => {\n  taxVatLabel= document.querySelector('label[for=\"billing\\\\:taxvat\"]');\n  taxVatInput = document.getElementById('billing:taxvat');\n  countrySelect = document.querySelector('#billing\\\\:country_id');\n\n  if (!EBANXData.maskTaxVat && !taxVatLabel && !taxVatInput && taxVatInput === null) {\n    return;\n  }\n\n  addDocumentTypeField();\n\n  if (!taxVatLabel && typeof amsCheckoutHandler === 'function') {\n    taxVatLabel = amsCheckoutHandler();\n  }\n\n  if (countrySelect) {\n    defaultLabel = taxVatLabel.innerHTML;\n\n    countrySelect.addEventListener('change', changeTaxVatLabel);\n    countrySelect.addEventListener('change', addDocumentTypeField);\n    countrySelect.dispatchEvent(new Event('change'));\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', init);\n"]}