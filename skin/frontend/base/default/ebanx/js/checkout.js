"use strict";var hasClass=function(e,r){return(" "+e.className+" ").indexOf(" "+r+" ")>-1},resetValidations=function(e,r){Array.from(e.querySelectorAll(r)).forEach(function(e){e.classList.remove("required-entry","validation-failed","brand-required"),e.nextElementSibling&&hasClass(e.nextElementSibling,"validation-advice")&&(e.nextElementSibling.style.display="none")})},addRequiredClassToInputs=function(e,r,n,a){resetValidations(n,a),Array.from(e).forEach(function(e){e.classList.add(r),hasClass(e,"hidden-input-brand")&&(e.classList.add("brand-required"),e.classList.remove("required-entry"))})},validationFormListener=function(e,r){var n=".required-entry-input",a=".required-entry-select";Array.from(r).forEach(function(r){r.querySelector("input[type=radio]").addEventListener("change",function(r){addRequiredClassToInputs(r.target.parentElement.querySelectorAll(n),"required-entry",e,n),addRequiredClassToInputs(r.target.parentElement.querySelectorAll(a),"validate-select",e,a)})})},initCreditCardOption=function(e,r){var n=e.querySelector("input[type=radio]"),a=".required-entry-input";n.checked=!0,addRequiredClassToInputs(n.parentElement.querySelectorAll(a),"required-entry",r,a)},initCreditCardWithoutSavedCards=function(e){e.querySelectorAll(".required-entry-input").forEach(function(e){e.classList.add("required-entry")}),e.querySelectorAll(".required-entry-select").forEach(function(e){e.classList.add("validate-select")})},initCreditCardForm=function(e,r){0!==e.length?(validationFormListener(r,e),initCreditCardOption(e[0],r)):initCreditCardWithoutSavedCards(r)},handleEbanxForm=function(e,r,n){var a=document.querySelector("#"+n),t=a.querySelectorAll(".ebanx-credit-card-option");initCreditCardForm(t,a);var i=function(e){return document.getElementById(e)},d=null,l=i("ebanx_"+r+"_"+e+"_"+r+"_name"),u=i("ebanx_"+r+"_"+e+"_"+r+"_number"),o=i("ebanx_"+r+"_"+e+"_expiration"),s=i("ebanx_"+r+"_"+e+"_expiration_yr"),c=i("ebanx_"+r+"_"+e+"_"+r+"_cid"),v=i("ebanx_"+r+"_"+e+"_token"),_=i("ebanx_"+r+"_"+e+"_brand"),y=i("ebanx_"+r+"_"+e+"_masked_card_number"),m=i("ebanx_"+r+"_"+e+"_device_fingerprint"),b=i("ebanx_"+r+"_"+e+"_mode"),f=i("ebanx_"+r+"_"+e+"_integration_key"),p=i("ebanx_"+r+"_"+e+"_country"),h=i("ebanx-error-message"),E=void 0!==i("payment_form_ebanx_"+r+"_"+e),g="sandbox"===b.value?"test":"production";EBANX.config.setMode(g),EBANX.config.setPublishableKey(f.value),EBANX.config.setCountry(p.value);var q=function(e){var r=document.querySelector("#review-buttons-container > button");void 0!==r&&r&&(r.disabled=e)},x=function(e){if(!e.data.hasOwnProperty("status")){var r=e.error.err,n=r.message;return r.message||(EBANX.errors.InvalidValueFieldError(r.status_code),n=EBANX.errors.message||"Some error happened. Please, verify the data of your credit card and try again."),h.innerHTML=n,q(!1),setTimeout(function(){Validation.showAdvice({advices:!1},h,"ebanx-error-message")},500),!1}d=e.data,v.value=d.token,_.value=d.payment_type_code,y.value=d.masked_card_number,m.value=d.deviceId,q(!1)},C=function(){u.value.length&&l.value.length&&o.value.length&&s.value.length&&c.value.length&&(d||(q(!0),EBANX.card.createToken({card_number:parseInt(u.value.replace(/ /g,"")),card_name:l.value,card_due_date:(parseInt(o.value)||0)+"/"+(parseInt(s.value)||0),card_cvv:c.value},x)))},L=function(){d=null,v.value="",_.value="",y.value="",m.value="",Validation.hideAdvice({advices:!1},h)};E&&(l.addEventListener("blur",C,!1),u.addEventListener("blur",C,!1),o.addEventListener("blur",C,!1),s.addEventListener("blur",C,!1),c.addEventListener("blur",C,!1),l.addEventListener("change",L,!1),u.addEventListener("change",L,!1),o.addEventListener("change",L,!1),s.addEventListener("change",L,!1),c.addEventListener("change",L,!1))};
//# sourceMappingURL=checkout.js.map
